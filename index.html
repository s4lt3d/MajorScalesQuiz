<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Major‑Scale Quiz</title>
<style>
  :root{
    --white-w: 68px;   /* default desktop/tablet */
    --white-h: 90px;
    --black-w: 46px;
    --black-h: 60px;
  }
  @media (max-width:480px){
    :root{
      --white-w: 16vw;   /* scale keys on small phones */
      --white-h: 22vw;
      --black-w: 11vw;
      --black-h: 14vw;
    }
  }

  /* general layout */
  body{
    margin:0;
    font-family:system-ui, sans-serif;
    background:#121212;
    color:#e0e0e0;
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:1.2rem;
    padding:1.2rem;
  }
  h1{margin:0.2rem 0 0.6rem}
  #question{font-size:1.25rem;text-align:center;min-height:2.4rem}
  #score{font-size:0.9rem}
  #result{height:1.8rem;font-weight:bold}

  /* keyboard rows */
  #keyboard{display:flex;flex-direction:column;touch-action:manipulation}
  .row{display:flex;justify-content:center;align-items:flex-end;}
  .black-row{margin-left:calc(var(--white-w) / 2);  /* centres blacks */ }

  /* individual key styling */
  .key{
    border:1px solid #555;border-radius:4px;
    user-select:none;
    display:flex;justify-content:center;align-items:center;
    font-size:0.9rem;
  }
  .white{
    width:var(--white-w); height:var(--white-h);
    background:#fefefe; color:#1a1a1a;
  }
  .black{
    width:var(--black-w); height:var(--black-h);
    background:#444; color:#fff;
    font-size:0.75rem;
    margin:0 auto;            /* centred inside wrapper */
  }

  /* “wrapper” cells for blacks so spacing stays correct */
  .blk-wrap{width:var(--white-w);display:flex;justify-content:center;}
</style>
</head>
<body>
  <h1>Major‑Scale Quiz</h1>
  <div id="question"></div>
  <div id="score">Correct 0 | Wrong 0 | 0 %</div>

  <div id="keyboard">
    <div class="row black-row" id="black-row"></div>
    <div class="row" id="white-row"></div>
  </div>

  <div id="result"></div>

<script>
/* ---------- data ---------- */
const degreeNames=["tonic","supertonic","mediant","subdominant","dominant",
  "submediant","leading tone","octave","ninth","tenth","eleventh","twelfth","thirteenth"];

const scales={C:["C","D","E","F","G","A","B","C","D","E","F","G","A"],
  G:["G","A","B","C","D","E","F#","G","A","B","C","D","E"],
  D:["D","E","F#","G","A","B","C#","D","E","F#","G","A","B"],
  A:["A","B","C#","D","E","F#","G#","A","B","C#","D","E","F#"],
  E:["E","F#","G#","A","B","C#","D#","E","F#","G#","A","B","C#"],
  B:["B","C#","D#","E","F#","G#","A#","B","C#","D#","E","F#","G#"],
  "F#":["F#","G#","A#","B","C#","D#","E#","F#","G#","A#","B","C#","D#"],
  F:["F","G","A","Bb","C","D","E","F","G","A","Bb","C","D"],
  Bb:["Bb","C","D","Eb","F","G","A","Bb","C","D","Eb","F","G"],
  Eb:["Eb","F","G","Ab","Bb","C","D","Eb","F","G","Ab","Bb","C"],
  Ab:["Ab","Bb","C","Db","Eb","F","G","Ab","Bb","C","Db","Eb","F"],
  Db:["Db","Eb","F","Gb","Ab","Bb","C","Db","Eb","F","Gb","Ab","Bb"],
  Gb:["Gb","Ab","Bb","Cb","Db","Eb","F","Gb","Ab","Bb","Cb","Db","Eb"],
  Cb:["Cb","Db","Eb","Fb","Gb","Ab","Bb","Cb","Db","Eb","Fb","Gb","Ab"]};

/* ---------- build keyboard ---------- */
const whiteNotes=["C","D","E","F","G","A","B"];
const blackPairs=[["C#","Db"],["D#","Eb"],[],["F#","Gb"],["G#","Ab"],["A#","Bb"],[]];

const whiteRow=document.getElementById("white-row");
const blackRow=document.getElementById("black-row");

whiteNotes.forEach(n=>{
  const btn=document.createElement("button");
  btn.className="key white";
  btn.textContent=n;
  btn.onclick=()=>guess(n);
  whiteRow.appendChild(btn);
});

blackPairs.forEach(pair=>{
  const wrap=document.createElement("div");
  wrap.className="blk-wrap";
  if(pair.length){
    const btn=document.createElement("button");
    btn.className="key black";
    btn.innerHTML=pair.join("<br>");
    btn.onclick=()=>guess(pair[0]);  // use sharp spelling for lookup
    wrap.appendChild(btn);
  }
  blackRow.appendChild(wrap);
});

/* ---------- quiz logic ---------- */
let current;
let correctCount=0, wrongCount=0;

function updateScore(){
  const total=correctCount+wrongCount;
  const pct=total?Math.round((correctCount/total)*100):0;
  document.getElementById("score").textContent=
    `Correct ${correctCount} | Wrong ${wrongCount} | ${pct} %`;
}

function nextQ(){
  const keys=Object.keys(scales);
  const scale=keys[Math.random()*keys.length|0];
  const deg=Math.random()*degreeNames.length|0;
  current={scale,deg};
  document.getElementById("question").textContent=
    `In ${scale} major, what is the ${degreeNames[deg]}?`;
  document.getElementById("result").textContent="";
}

function normalize(n){
  return n.replace(/♯/,"#").replace(/♭/,"b").toUpperCase();
}

function guess(note){
  const ans=normalize(note);
  const correct=normalize(scales[current.scale][current.deg]);
  if(ans===correct){
    correctCount++;
    document.getElementById("result").textContent="Correct!";
  }else{
    wrongCount++;
    document.getElementById("result").textContent=`No – it’s ${correct}`;
  }
  updateScore();
  setTimeout(nextQ,900);
}

updateScore();
nextQ();
</script>
</body>
</html>
