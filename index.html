<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Major‑Scale Quiz</title>
<style>
  body {
    font-family: sans-serif;
    margin: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 1rem;
    gap: 1rem;
  }
  h1 { margin: 0.3rem 0; }
  #question { font-size: 1.2rem; text-align: center; min-height: 2.4rem; }
  #keyboard {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    touch-action: manipulation;
  }
  .white-row {
    display: flex;
    position: relative;
  }
  .key {
    border: 1px solid #333;
    border-radius: 4px;
    padding: 0.6rem 0;
    text-align: center;
    user-select: none;
  }
  .white {
    background: #fafafa;
    width: 48px;
    z-index: 1;
  }
  .black {
    position: absolute;
    background: #333;
    color: #fff;
    width: 30px;
    font-size: 0.7rem;
    padding: 0.3rem 0;
    z-index: 2;
  }
  #result { height: 1.8rem; font-weight: bold; }
  @media (max-width: 480px) {
    .white { width: 12vw; }
    .black { width: 7vw; }
  }
</style>
</head>
<body>
  <h1>Major‑Scale Quiz</h1>
  <div id="question"></div>
  <div id="keyboard">
    <div class="white-row" id="white-row"></div>
  </div>
  <div id="result"></div>

<script>
const degreeNames=["tonic","supertonic","mediant","subdominant","dominant",
                   "submediant","leading tone","octave","ninth","tenth",
                   "eleventh","twelfth","thirteenth"];

const scales={C:["C","D","E","F","G","A","B","C","D","E","F","G","A"],
  G:["G","A","B","C","D","E","F#","G","A","B","C","D","E"],
  D:["D","E","F#","G","A","B","C#","D","E","F#","G","A","B"],
  A:["A","B","C#","D","E","F#","G#","A","B","C#","D","E","F#"],
  E:["E","F#","G#","A","B","C#","D#","E","F#","G#","A","B","C#"],
  B:["B","C#","D#","E","F#","G#","A#","B","C#","D#","E","F#","G#"],
  "F#":["F#","G#","A#","B","C#","D#","E#","F#","G#","A#","B","C#","D#"],
  F:["F","G","A","Bb","C","D","E","F","G","A","Bb","C","D"],
  Bb:["Bb","C","D","Eb","F","G","A","Bb","C","D","Eb","F","G"],
  Eb:["Eb","F","G","Ab","Bb","C","D","Eb","F","G","Ab","Bb","C"],
  Ab:["Ab","Bb","C","Db","Eb","F","G","Ab","Bb","C","Db","Eb","F"],
  Db:["Db","Eb","F","Gb","Ab","Bb","C","Db","Eb","F","Gb","Ab","Bb"],
  Gb:["Gb","Ab","Bb","Cb","Db","Eb","F","Gb","Ab","Bb","Cb","Db","Eb"],
  Cb:["Cb","Db","Eb","Fb","Gb","Ab","Bb","Cb","Db","Eb","Fb","Gb","Ab"]};

const whiteNotes=["C","D","E","F","G","A","B"];
const blackKeys = [
  {note:"C#", pos: 36}, // between C and D
  {note:"D#", pos: 84}, // between D and E
  {note:"F#", pos: 180}, // between F and G
  {note:"G#", pos: 228}, // between G and A
  {note:"A#", pos: 276}  // between A and B
];

const whiteRow=document.getElementById("white-row");

// Add white keys
whiteNotes.forEach(n=>{
  const btn=document.createElement("button");
  btn.textContent=n;
  btn.className="key white";
  btn.onclick=()=>guess(n);
  whiteRow.appendChild(btn);
});

// Add black keys overlay
blackKeys.forEach(k=>{
  const btn=document.createElement("button");
  btn.textContent=k.note;
  btn.className="key black";
  btn.style.left = k.pos + "px";
  btn.onclick=()=>guess(k.note);
  whiteRow.appendChild(btn);
});

let current;
nextQ();

function nextQ(){
  const keys=Object.keys(scales);
  const scale=keys[Math.random()*keys.length|0];
  const degree=Math.random()*degreeNames.length|0;
  current={scale,degree};
  document.getElementById("question").textContent=
    `In ${scale} major, what is the ${degreeNames[degree]}?`;
  document.getElementById("result").textContent="";
}

function guess(note){
  const ans=normalize(note);
  const correct=normalize(scales[current.scale][current.degree]);
  document.getElementById("result").textContent=
     ans===correct?"Correct!":`No – it’s ${correct}`;
  setTimeout(nextQ,800);
}

function normalize(n){return n.replace(/♯/,"#").replace(/♭/,"b").toUpperCase();}
</script>
</body>
</html>
