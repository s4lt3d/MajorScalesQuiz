<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Major Scale Quiz</title>
<style>
  :root{
    --white-w: 60px;   /* base widths; mobile media rule below scales them */
    --black-w: 38px;
  }
  @media (max-width:480px){
    :root{
      --white-w: 14vw;
      --black-w: 9vw;
    }
  }

  body{
    margin:0;
    font-family:system-ui, sans-serif;
    background:#121212;
    color:#e0e0e0;
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:1.2rem;
    padding:1.2rem;
  }
  h1{margin:0.2rem 0 0.6rem}
  #question{font-size:1.25rem;text-align:center;min-height:2.4rem}
  #score{font-size:0.9rem}
  /* keyboard layout */
  #keyboard{display:flex;flex-direction:column;gap:8px;touch-action:manipulation}
  .row{display:flex;justify-content:center}
  .key{
    border:1px solid #5f5f5f;border-radius:4px;
    padding:0.8rem 0;
    text-align:center;
    user-select:none;
    font-size:0.9rem;
  }
  .white{
    width:var(--white-w);
    background:#2c2c2c;
    color:#fafafa;
  }
  .black{
    width:var(--black-w);
    background:#444;
    color:#fff;
    font-size:0.75rem;
  }
  #result{height:1.8rem;font-weight:bold}
</style>
</head>
<body>
  <h1>Major Scale Quiz</h1>
  <div id="question"></div>
  <div id="score">Correct 0 | Wrong 0 | 0 %</div>

  <div id="keyboard">
    <div class="row" id="black-row"></div>
    <div class="row" id="white-row"></div>
  </div>

  <div id="result"></div>

<script>
/* data */
const degreeNames=["tonic","supertonic","mediant","subdominant","dominant",
 "submediant","leading tone","octave","ninth","tenth","eleventh","twelfth","thirteenth"];

const scales={C:["C","D","E","F","G","A","B","C","D","E","F","G","A"],
  G:["G","A","B","C","D","E","F#","G","A","B","C","D","E"],
  D:["D","E","F#","G","A","B","C#","D","E","F#","G","A","B"],
  A:["A","B","C#","D","E","F#","G#","A","B","C#","D","E","F#"],
  E:["E","F#","G#","A","B","C#","D#","E","F#","G#","A","B","C#"],
  B:["B","C#","D#","E","F#","G#","A#","B","C#","D#","E","F#","G#"],
  "F#":["F#","G#","A#","B","C#","D#","E#","F#","G#","A#","B","C#","D#"],
  F:["F","G","A","Bb","C","D","E","F","G","A","Bb","C","D"],
  Bb:["Bb","C","D","Eb","F","G","A","Bb","C","D","Eb","F","G"],
  Eb:["Eb","F","G","Ab","Bb","C","D","Eb","F","G","Ab","Bb","C"],
  Ab:["Ab","Bb","C","Db","Eb","F","G","Ab","Bb","C","Db","Eb","F"],
  Db:["Db","Eb","F","Gb","Ab","Bb","C","Db","Eb","F","Gb","Ab","Bb"],
  Gb:["Gb","Ab","Bb","Cb","Db","Eb","F","Gb","Ab","Bb","Cb","Db","Eb"],
  Cb:["Cb","Db","Eb","Fb","Gb","Ab","Bb","Cb","Db","Eb","Fb","Gb","Ab"]};

/* build keyboard */
const whiteNotes=["C","D","E","F","G","A","B"];
const blackPairs=[["C#","Db"],["D#","Eb"],[],["F#","Gb"],["G#","Ab"],["A#","Bb"],[]];

const whiteRow=document.getElementById("white-row");
const blackRow=document.getElementById("black-row");

whiteNotes.forEach(n=>{
  const b=document.createElement("button");
  b.className="key white";
  b.textContent=n;
  b.onclick=()=>guess(n);
  whiteRow.appendChild(b);
});

blackPairs.forEach(pair=>{
  if(pair.length){
    const b=document.createElement("button");
    b.className="key black";
    b.innerHTML=pair.join("<br>");
    b.onclick=()=>guess(pair[0]);   // use sharp spelling
    blackRow.appendChild(b);
  }else{
    const spacer=document.createElement("div");
    spacer.style.width="var(--black-w)";
    blackRow.appendChild(spacer);
  }
});

/* quiz logic */
let current;
let correctCount=0, wrongCount=0;

function updateScore(){
  const total=correctCount+wrongCount;
  const pct=total?Math.round((correctCount/total)*100):0;
  document.getElementById("score").textContent=
    `Correct ${correctCount} | Wrong ${wrongCount} | ${pct} %`;
}

function nextQ(){
  const keys=Object.keys(scales);
  const scale=keys[Math.random()*keys.length|0];
  const deg=Math.random()*degreeNames.length|0;
  current={scale,deg};
  document.getElementById("question").textContent=
    `In ${scale} major, what is the ${degreeNames[deg]}?`;
  document.getElementById("result").textContent="";
}

function normalize(n){
  return n.replace(/♯/,"#").replace(/♭/,"b").toUpperCase();
}

function guess(note){
  const ans=normalize(note);
  const correct=normalize(scales[current.scale][current.deg]);
  if(ans===correct){
    correctCount++;
    document.getElementById("result").textContent="Correct!";
  }else{
    wrongCount++;
    document.getElementById("result").textContent=`No – it’s ${correct}`;
  }
  updateScore();
  setTimeout(nextQ,800);
}

updateScore();
nextQ();
</script>
</body>
</html>
